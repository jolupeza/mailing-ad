var j=jQuery.noConflict();(function(a){j("body").on("click","#select-menu",function(c){c.preventDefault();var d=j("#list-menus").val();var b=j(this).data("href");
window.location=_root_+b+d;});j("body").on("click",".sh-settings",function(){var b=j(this).parent().parent().parent().parent();if(b.hasClass("menu-item-edit-inactive")){b.removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active");
j(this).removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-up");}else{b.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive");
j(this).removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-down");}});j("body").on("click",".del-mnu-item",function(b){b.preventDefault();var d=j(this).data("id");
var c=j(this).data("idmenu");c=(c=="undefined")?0:j(this).data("idmenu");j.post(_root_+"admin/menus/deleteItemMenu",{id:d,idMenu:c},function(f){if(f){j("#menu-item-"+d).remove();
var e=j(".ui-sorteable li");e.each(function(h,i){var g=h+1;j(i).find(".menu-item-data-position").val(g);});}});});j("body").on("click",".cancel-mnu-item",function(b){b.preventDefault();
var c=j(this).data("id");if(j("#menu-item-"+c).hasClass("menu-item-edit-inactive")){j("#menu-item-"+c).removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active");
j("#sh-settings-"+c).removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-up");}else{j("#menu-item-"+c).removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive");
j("#sh-settings-"+c).removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-down");}});j(".ui-sorteable").sortable({opacity:0.7,update:function(){var b=j(this).children("li");
b.each(function(d,e){var c=d+1;j(e).find(".menu-item-data-position").val(c);});}});j(".ui-sorteable").disableSelection();j("body").on("click","#add-menu-item-link",function(e){e.preventDefault();
var d=j('input[name="type"]').val();var c=j("#link-url").val();if(c.length==0){j("#link-url").focus();return;}var g=(c.substr(0,7)=="http://")?c.substr(0,7):c.substr(0,8);
if(g=="http://"||g=="https://"){var f=c.substr(g.length);if(f.length==0){j("#link-url").focus();return;}var b=j("#link-name").val();if(b.length==0){j("#link-name").focus();
return;}j("#link_url").val("http://");j("#link_name").val("");j.post(_root_+"admin/menus/addLinkCustom",{url:c,name:b},function(h){j.post(_root_+"admin/menus/getPostMeta",{id:h.id},function(i){html=container_menu_item(d,h.id,b,i,c);
j(".structure-menu .panel-body ul.ui-sorteable").append(html);},"json");},"json");}else{j("#link-url").focus();return;}});j("body").on("click",".add-menu-item",function(b){b.preventDefault();
j(".chk-opt").each(function(){if(j(this).is(":checked")){var c="";var d=j(this).data("type");var f=j(this).val();var e=j(this).data("title");j(this).removeProp("checked");
j.post(_root_+"admin/menus/addMenuItem",{id:f,object:j(this).data("object")},function(g){j.post(_root_+"admin/menus/getPostMeta",{id:g.id},function(h){c=container_menu_item(d,g.id,e,h);
j(".structure-menu .panel-body ul.ui-sorteable").append(c);},"json");},"json");}});});j("body").on("click","#delMenu",function(b){b.preventDefault();var c=j(this).data("idmenu");
j.post(_root_+"admin/menus/delMenu",{id:c},function(d){if(d){window.location=_root_+"admin/menus";}});});})(jQuery);function container_menu_item(e,h,g,f,b){var c="";
b=(b)?b:"";var d="";switch(e){case"Página":case"Page":d="page";break;case"Categoría":case"Category":d="category";break;case"Personalizado":case"Custom":d="custom";
break;}var a=j(".ui-sorteable li").length;a++;c+='<li id="menu-item-'+h+'" class="menu-item menu-item-depth-0 menu-item-'+d+' menu-item-edit-inactive">';
c+='<dl class="menu-item-bar">';c+='<dt class="menu-item-handle">';c+='<span class="item-title">';c+='<span class="menu-item-title">'+g+"</span>";c+='<span class="is-submenu">subelemento</span>';
c+="</span>";c+='<span class="item-controls pull-right">';c+='<span class="item-type">'+e+"</span>";c+='<span class="sh-settings glyphicon glyphicon-arrow-down" id="sh-settings-'+h+'"></span>';
c+="</span>";c+="</dt>";c+="</dl>";c+='<div class="menu-item-settings" id="menu-item-settings-'+h+'">';if(d=="custom"){c+='<div class="row">';c+='<div class="col-md-12">';
c+='<div class="form-group">';c+='<label for="edit-menu-item-url-'+h+'"><em>URL</em></label>';c+='<input type="text" class="form-control edit-menu-item-url" name="menu-item-url['+h+']" id="edit-menu-item-url-'+h+'" value="'+b+'" />';
c+="</div><!-- end form-group -->";c+="</div><!-- end col-md-6 -->";c+="</div><!-- end row -->";}c+='<div class="row">';c+='<div class="col-md-6">';c+='<div class="form-group">';
c+='<label for="edit-menu-item-'+h+'"><em>Etiqueta de navegación</em></label>';c+='<input type="text" class="form-control edit-menu-item-title" name="menu-item-title['+h+']" id="edit-menu-item-'+h+'" value="'+g+'" />';
c+='<div class="checkbox">';c+="<label>";c+='<input type="checkbox" id="edit-menu-item-target-'+h+'" name="menu-item-target['+h+']"> Abrir enlace en una nueva ventana / pestaña';
c+="</label>";c+="</div><!-- end checkbox -->";c+="</div><!-- end form-group -->";c+="</div><!-- end col-md-6 -->";c+='<div class="col-md-6">';c+='<div class="form-group">';
c+='<label for="edit-menu-item-attr-title-'+h+'"><em>Atributos del título</em></label>';c+='<input type="text" class="form-control edit-menu-item-attr-title" name="menu-item-attr-title['+h+']" id="edit-menu-item-attr-title-'+h+'" />';
c+="</div><!-- end form-group -->";c+="</div><!-- end col-md-6 -->";c+="</div><!-- end row -->";c+='<div class="row">';c+='<div class="col-md-6">';c+='<div class="form-group">';
c+='<label for="edit-menu-item-classes-'+h+'"><em>Clases CSS (Opcional)</em></label>';c+='<input type="text" class="form-control edit-menu-item-classes" name="menu-item-classes['+h+']" id="edit-menu-item-classes-'+h+'" />';
c+="</div><!-- end form-group -->";c+="</div><!-- end col-md-6 -->";c+="</div><!-- end row -->";c+='<div class="menu-item-footer">';c+='<p><a href="#" class="del-mnu-item text-danger" data-id="'+h+'">Eliminar</a> | <a href="#" data-id="'+h+'" class="cancel-mnu-item">Cancelar</a></p>';
c+="</div>";c+='<input type="hidden" class="menu-item-data-db-id" name="menu-item-db-id['+h+']" value="'+h+'" />';c+='<input type="hidden" class="menu-item-data-object-id" name="menu-item-object-id['+h+']" value="'+f[2].meta_value+'" />';
c+='<input type="hidden" class="menu-item-data-object" name="menu-item-object['+h+']" value="'+f[3].meta_value+'" />';c+='<input type="hidden" class="menu-item-data-parent-id" name="menu-item-parent-id['+h+']" value="'+f[1].meta_value+'" />';
c+='<input type="hidden" class="menu-item-data-position" name="menu-item-position['+h+']" value="'+a+'" />';c+='<input type="hidden" class="menu-item-data-type" name="menu-item-type['+h+']" value="'+f[0].meta_value+'" />';
c+="</div><!-- end menu-item-settings-->";c+="</li>";return c;}